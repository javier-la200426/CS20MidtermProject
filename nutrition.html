<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="keywords" content="nutrition, healthy, coffee menu, cafe menu, drinks, food, kindlevan">
    <title>Nutritional Info - Kindlevan Café</title>
    <link rel="stylesheet" href="styles.css">

    <!-- Inspired by PJ's Coffee site: https://www.pjscoffee.com/nutrition/ -->
    <style>
        #nutrition-banner {
            background-image: url("img/imgJav2Nutrition.jpg");
            background-size: cover;
            background-position: 50% 50%;
            width: 100%;
            height: 25vh;
            text-align: center;
            vertical-align: middle;
            box-sizing: border-box;
            padding: 0;
            margin-top: 0px;
        }

        main {
            width: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        a {
            text-decoration: none;
        }

        .subcategory-card {
            margin-top: 50px;
            background-color: white;
            border-radius: 1rem;
            padding: 20px 50px;
        }

        .item-row {
            display: flex;
            border-bottom: 1px solid black;
        }

        .item-name {
            width: 200px;
        }

        @media (max-width: 768px) {
            header {
                position: fixed;
                z-index: 1001;
            }

            main {
                padding: 0;
                margin-top: 0 !important;
            }

            .page-header {
                margin-top: 70px;
            }

            #nutrition-banner {
                margin-top: 70px;
            }

            .content-section {
                padding: 0 20px;
            }

            .subcategory-card {
                padding: 15px 20px;
                margin-top: 30px;
            }

            .item-row {
                flex-direction: column;
                align-items: flex-start;
                padding: 10px 0;
            }

            .item-name {
                width: 100%;
                font-weight: bold;
                margin-bottom: 5px;
            }
        }

        @media (max-width: 400px) {
            .page-header {
                margin-top: 60px;
            }

            #nutrition-banner {
                margin-top: 60px;
            }

            .content-section {
                padding: 0 15px;
            }

            .subcategory-card {
                padding: 10px 15px;
                margin-top: 20px;
            }

            .subcategory-card h2 {
                font-size: 1.2rem;
            }
        }

    </style>
</head>
<body>
    <header>
        <nav>
            <div class="logo"> 
                <a href="index.html">Kindlevan Café</a>
            </div>
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="menu.html">Menu</a></li>
                <li><a href="rewards.html">Rewards</a></li>
                <li><a href="orders.html">Online Orders</a></li>
                <li><a href="nutrition.html" class="active">Nutrition</a></li>
                <li><a href="hiring.html">Join Us</a></li>
                <li><a href="contact.html">Contact Us</a></li>
                <li><a href="about.html">About</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section class="page-header" id="nutrition-banner">
            <h1 id="header">Nutritional Facts</h1>
        </section>
    </main>

    <footer>
        <div class="footer-content">
            <div class="logo">
                <a href="index.html">Kindlevan Café</a>
            </div>
            <p>&copy; 2024 Kindlevan Café. All rights reserved.</p>
        </div>
    </footer>

    <script>
        fetch("nutrition.json")
            .then(response => response.json())
            .then(data => { 
                createCards(data)
            }) 
            .catch(error => console.error('Error:', error));
       
        function createCards(facts) {
            const mainDiv = document.querySelector("main");

            Object.keys(facts).forEach(category => {

                Object.keys(facts[category]).forEach(subcategory => {
                    const subcategoryCard = document.createElement("div");
                    const subcategoryHeader = document.createElement("h2");
                    subcategoryHeader.innerHTML = subcategory;
                    subcategoryCard.appendChild(subcategoryHeader);
                    subcategoryCard.classList.add("subcategory-card");
                    mainDiv.appendChild(subcategoryCard);

                    Object.keys(facts[category][subcategory]).forEach(item => {
                        const itemRow = document.createElement("div")
                        itemRow.classList.add("item-row");
                        const itemName = document.createElement("p");
                        itemName.classList.add("item-name");
                        itemName.innerHTML = item;
                        itemRow.appendChild(itemName);

                        info = Object.values(facts[category][subcategory][item]);
                        itemFacts = document.createElement("p");    
                        itemFacts.innerHTML = `
                            ${info[0] ? info[0]+"cal" : "—"} &nbsp; &bull; &nbsp; 
                            ${info[1] ? info[1]+"g" : "—"} carbs &nbsp; &bull; &nbsp; 
                            ${info[2] ? info[2]+"g" : "—"} protein &nbsp; &bull; &nbsp; 
                            ${info[3] ? info[3]+"g" : "—"} fat
                        `
                        itemRow.appendChild(itemFacts);
                        
                        subcategoryCard.appendChild(itemRow);
                    })

                })
               
            })
            
        }

        // Add disclaimer text at the bottom after all nutrition cards are loaded
        setTimeout(() => {
            const mainDiv = document.querySelector("main");
            const disclaimerSection = document.createElement("section");
            disclaimerSection.classList.add("content-section");
            disclaimerSection.innerHTML = `
                <p>Daily values are based on a 2,000 calorie diet. Individual requirements may vary</p>
                <!-- Nutritional facts collected from Kindlevan site (https://tufts.nutrislice.com/menu/kindlevan-cafe/daily) and compiled with ChatGPT -->
                <p>Please refer to the <a href="assets/nutrition_table.pdf" target="_blank">Nutritional Brochure</a> for complete nutritional information.</p>
            `;
            mainDiv.appendChild(disclaimerSection);
        }, 100);

    </script>

    <script>
        const hamburger = document.querySelector('.hamburger');
        const navLinks = document.querySelector('.nav-links');

        hamburger.addEventListener('click', () => {
            hamburger.classList.toggle('active');
            navLinks.classList.toggle('active');
        });
    </script>
</body>
</html>
