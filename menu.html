<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="keywords" content="coffee menu, cafe menu, drinks, food, kindlevan">
    <title>Menu - Kindlevan Café</title>
    <link rel="stylesheet" href="styles.css">

    <!-- Inspired by The Capitol Coffeehouse Site: https://www.thecapitolcoffeehouse.com/menu -->
    <style>
        main {
            width: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .menu-options-box {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 25px;
        }

        .menu-options-box input {
            display: none;
        }

        .menu-options-box label {
            cursor: pointer;
        }

        /* Referenced article for styling label when button checked: https://stackoverflow.com/questions/5275857/highlight-label-if-checkbox-is-checked */
        .menu-options-box input:checked + label {
            border-bottom: 1.5px black solid;
        }

        .coffee-pic {
            width: 700px;
            height: 300px;
            background-image: url("img/coffee.jpg");
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            border-radius: 1rem;
            margin: 30px 0;
        }

        /* Referenced this article for two column uls: https://www.tutorialspoint.com/how-to-display-unordered-list-in-two-columns */
        ul {
            column-count: 2;
            column-gap: 50px;
        }

        ul li .item-span {
            display: inline-block;
            width: 200px;
        }

        /* Referenced this for styling children not at beginning: https://www.geeksforgeeks.org/css/how-to-use-a-notfirst-child-selector-in-css/ */
        .menu-category:not(:first-child) {
            margin-top: 30px;
        }
    </style>
</head>
<body>
    <header>
        <nav>
            <div class="logo">
                <a href="index.html">Kindlevan Café</a>
            </div>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="menu.html">Menu</a></li>
                <li><a href="store.html">Store</a></li>
                <li><a href="events.html">Events</a></li>
                <li><a href="sourcing.html">Sourcing</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <h1>Our Menu</h1>
        
        <div class="coffee-pic"></div>

        <div class="menu-options-box">
            <input type="radio" name="menu" id="coffee" checked>
            <label for="coffee"><h2>Coffee & Tea</h2></label>

            <input type="radio" name="menu" id="smoothies">
            <label for="smoothies"><h2>Smoothies</h2></label>

            <input type="radio" name="menu" id="food">
            <label for="food"><h2>Food</h2></label>
        </div>
        
        <section class="menu-section">
            <ul type="square">

            </ul>
        </section>


    </main>

    <footer>
        <div class="footer-content">
            <div class="logo">
                <a href="index.html">Kindlevan Café</a>
            </div>
            <p>&copy; 2024 Kindlevan Café. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // Referenced article for reading in json: https://www.geeksforgeeks.org/javascript/read-json-file-using-javascript/
        let menu;
        fetch("menu.json")
            .then(response => response.json())
            .then(data => { 
                menu = data;

                const unorderedList = document.querySelector(".menu-section ul");
                let selected = "coffee";

                populateMenu(selected, unorderedList);
                
                const radioButtons = document.querySelectorAll(".menu-options-box input");
                const radioLabels = document.querySelectorAll(".menu-options-box label");
                radioLabels.forEach((button, index) => {
                    button.onclick = () => {
                    radioButtons[index].checked = true;
                    
                    selected = radioButtons[index].id;
                    populateMenu(radioButtons[index].id, unorderedList);
                }
                })
            }) 
            .catch(error => console.error('Error:', error));


        function populateMenu(type, unorderedList) {
            // Clear current list
            unorderedList.innerHTML = "";

             // Referenced docs for forEach syntax: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach
            Object.keys(menu[type]).forEach(category => {
                const liCategory = document.createElement("h3");
                liCategory.classList.add("menu-category");
                liCategory.textContent = category;

                unorderedList.appendChild(liCategory);

                Object.keys(menu[type][category]).forEach(item => {
                    const liEntry = document.createElement("li");
                    const itemSpan = document.createElement("span");
                    itemSpan.classList.add("item-span");
                    itemSpan.textContent = item;

                    liEntry.appendChild(itemSpan);
                    const priceSpan = document.createElement("span");

                    Object.values(menu[type][category][item]).forEach((price, index, arr) => {
                        priceSpan.textContent += `$${price.toFixed(2)}`; 
                    
                        if (index < arr.length - 1) {
                            priceSpan.textContent += " / ";
                        }

                    })

                    liEntry.appendChild(priceSpan);
                    unorderedList.appendChild(liEntry);
                })



          
            })
        }
        
        

    </script>
</body>
</html>
